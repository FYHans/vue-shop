(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6762497e"],{"33b6":function(e,t,a){},4306:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manager-set"},[a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[e._v("修改资料")]),a("CommonForm",{attrs:{formLabel:e.formLabel,form:e.data},scopedSlots:e._u([{key:"operation",fn:function(){return[a("el-button",{attrs:{type:"success"},on:{click:e.resetValue}},[e._v("重置")]),a("el-button",{attrs:{type:"danger"},on:{click:e.update}},[e._v("修改")])]},proxy:!0}])},[[a("el-form-item",{staticClass:"avatar",attrs:{label:"头像",prop:"img"}},[a("img",{staticClass:"currentAvatar",attrs:{src:e.data.img,alt:"",width:"100"}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/admin/manager/avatarUpload","on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeAvatarUpload,"show-file-list":!1}},[e.imageUrl?a("img",{staticClass:"newAvatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]],2)],1),a("div",{staticClass:"updatePassword"},[a("h2",[e._v("修改密码")]),a("el-form",{ref:"passwordForm",attrs:{"label-width":"200px",model:e.data,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.data.username,callback:function(t){e.$set(e.data,"username",t)},expression:"data.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),a("el-form-item",{attrs:{label:"重复密码",prop:"repeat"}},[a("el-input",{attrs:{placeholder:"请输入重复密码",type:"password"},model:{value:e.data.repeat,callback:function(t){e.$set(e.data,"repeat",t)},expression:"data.repeat"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:e.resetValue}},[e._v("重置")]),a("el-button",{attrs:{type:"danger"},on:{click:e.updatePassword}},[e._v("修改")])],1)],1)],1)])},o=[],l=a("767d"),s=a("fe4f"),n={components:{CommonForm:l["a"]},data:function(){var e=this;return{data:{},rules:{username:[{trigger:"blur",validator:s["f"]}],password:[{trigger:"blur",validator:s["c"]}],repeat:[{trigger:"blur",validator:function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s["d"].apply(void 0,[e.data.password,"密码"].concat(a))}}]},form:{},formLabel:[{model:"username",label:"姓名",type:"input"},{model:"permission",label:"权限",type:"input"},{model:"position",label:"职位",type:"input"},{model:"city",label:"所在城市",type:"input"},{model:"intro",label:"个人简介",type:"textarea"},{model:"password",label:"账号密码",type:"input"},{model:"payword",label:"支付密码",type:"input"},{model:"telphone",label:"手机号",type:"input"},{model:"bankcard",label:"银行卡号",type:"input"},{model:"wechat",label:"微信号",type:"input"}],imageUrl:""}},methods:{getData:function(){var e=this;this.window.sessionStorage.getItem("username");this.$http.get("/data/manager/managerInfo").then((function(t){var a=t.data;e.data=a})).catch((function(t){return e.$message.error("ManagerSet-getData",t)}))},beforeAvatarUpload:function(e){console.log(123);var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},uploadSuccess:function(e){this.imageUrl=window.URL.createObjectURL(file.raw),0===e.errno?this.$set(this.data,"img",e.img):this.$message.error({message:"加载图片失败",type:"warning"})},uploadError:function(){this.$message.error({message:"上传失败",type:"warning"})},resetValue:function(){this.$refs.passwordForm.resetFields(),console.log(this.$refs.passwordForm)},updatePassword:function(){var e=this;this.$refs.passwordForm.validate((function(t){t&&e.update()}))},update:function(){var e=this;this.$confirm("您确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.post("/admin/manager/update",e.data).then((function(t){var a=t.data;0===a.errno?(e.$message({message:"修改成功",type:"success"}),setTimeout((function(){e.$router.go(0)}),1e3)):e.$message({message:a.msg,type:"warning"})}))})).catch((function(){e.$message({type:"info",message:"已取消修改"})}))}},created:function(){this.getData()}},i=n,m=(a("4a69"),a("2877")),d=Object(m["a"])(i,r,o,!1,null,null,null);t["default"]=d.exports},"4a69":function(e,t,a){"use strict";a("33b6")},"767d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{inline:e.inline,model:e.form,"label-width":"200px",rules:e.rules}},[e._l(e.formLabel,(function(t){return a("el-form-item",{key:t.model,attrs:{label:t.label}},["input"===t.type?a("el-input",{attrs:{placeholder:"请输入"+t.label,prop:e.form[t.model]},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),"textarea"===t.type?a("el-input",{attrs:{placeholder:"请输入"+t.label,type:"textarea"},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),"select"===t.type?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}},e._l(t.opts,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"switch"===t.type?a("el-switch",{model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),"date"===t.type?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),a("el-form-item",[e._t("default")],2)],1)})),e.isSearch?a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:e.handleResetForm}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleFindForm}},[e._v("查询")])],1):e._e()],2)},o=[],l={props:{inline:{type:Boolean,default:!0},form:Object,formLabel:Array,rules:Object,isSearch:Boolean},methods:{handleResetForm:function(){this.$emit("resetForm",this.form)},handleFindForm:function(){this.$emit("findForm",this.form)}}},s=l,n=a("2877"),i=Object(n["a"])(s,r,o,!1,null,null,null);t["a"]=i.exports}}]);
//# sourceMappingURL=chunk-6762497e.aca72e1e.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b34a268c"],{"074c":function(e,t,r){},"2c3f":function(e,t,r){"use strict";r("074c")},d3f8:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-list"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"apppend",icon:"el-icon-search"},on:{click:e.getUserList},slot:"apppend"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),r("el-table-column",{attrs:{label:"电话",prop:"telphone"}}),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),r("el-table-column",{attrs:{label:"角色",prop:"permission"}}),r("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.userStatusChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}}),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"}})],1)],1)],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"page-sizes":[5,10,15,20],total:e.pagetotal,"current-page":e.queryInfo.pagenum,"page-size":e.queryInfo.pagesize,layout:"total, prev, pager, next, sizes"},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"pagenum",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"pagenum",t)},"update:pageSize":function(t){return e.$set(e.queryInfo,"pagesize",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"pagesize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"telphone"}},[r("el-input",{model:{value:e.addForm.telphone,callback:function(t){e.$set(e.addForm,"telphone",t)},expression:"addForm.telphone"}})],1),r("el-form-item",{attrs:{label:"email",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("span",[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确定")])],1)],1)],1)],1)},s=[],n=(r("96cf"),r("1da1")),i=r("fe4f"),l={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:2},userlist:[],pagetotal:0,dialogVisible:!1,addForm:{username:"",password:"",telphone:"",email:""},addFormRules:{username:[{required:!0,trigger:"blur",validator:i["f"],message:"请输入4-10位用户名"}],password:[{required:!0,trigger:"blur",validator:i["c"],message:"请输入4-10位密码"}],telphone:[{required:!0,trigger:"blur",validator:i["e"],message:"请输入合法手机号"}],email:[{required:!0,trigger:"blur",validator:i["a"],message:"请输入合法邮箱"}]}}},methods:{getUserList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/data/user/userlist",{params:this.queryInfo});case 2:if(t=e.sent,200===t.status){e.next=5;break}return e.abrupt("return",this.$message.error("获取用户列表失败"));case 5:this.userlist=t.data,this.pagetotal=t.data.length;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},userStatusChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("user/".concat(t.id,"/status/").concat(t.status));case 2:if(r=e.sent,200===r.status){e.next=6;break}return t.status=!t.status,e.abrupt("return",this.$message.error("获取用户列表失败"));case 6:this.$message.success("获取用户列表成功");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),dialogClose:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=9;break}return t.next=3,e.$http.post("/admin/user/createUser",e.queryInfo);case 3:if(a=t.sent,200===a.status){t.next=6;break}return t.abrupt("return",e.$message.error("用户创建"));case 6:e.$message.success("创建用户成功"),e.dialogVisible=!1,e.getUserList();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.getUserList()}},o=l,u=(r("2c3f"),r("2877")),c=Object(u["a"])(o,a,s,!1,null,"28e60241",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-b34a268c.0542d842.js.map